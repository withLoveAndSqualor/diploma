!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));class s{constructor(){}saveNewsToLS(e){localStorage.setItem("news",JSON.stringify(e))}getNewsFromLS(){const e=localStorage.getItem("news");return JSON.parse(e)}clear(){localStorage.clear()}}},function(e,t,r){},,,,,function(e,t,r){"use strict";r.r(t);var s,n,a;r(1);class o{constructor(e){this.errorSection=e,this.date=new Date,this.today=this._getToday(this.date),this.weekAgo=this._getWeekAgo(this.date)}_getToday(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}_getWeekAgo(e){const t=new Date(e);t.setDate(e.getDate()-7);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}getNews(e){return fetch(`https://newsapi.org/v2/everything?language=ru&q=${e}&from=${this.weekAgo}&to=${this.today}`,{method:"GET",headers:{authorization:""+o.apiKey}}).then(e=>e.ok?e.json():(this.errorSection.style.display="flex",Promise.reject("Ошибка: "+e.status)))}}a="97c321c4349f428aba6f530071cac80f",(n="apiKey")in(s=o)?Object.defineProperty(s,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[n]=a;class i{constructor(e){this.data=e}_formateDate(){const e=new Date(this.data.publishedAt);return`${e.getDate()} ${["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декарь"][e.getMonth()]}, ${e.getFullYear()}`}create(){const e=document.createElement("div"),t=this._formateDate();return e.insertAdjacentHTML("beforeend",i.markup),e.querySelector(".search-results__photo").src=""+this.data.urlToImage,e.querySelector(".link").href=""+this.data.url,e.querySelector(".search-results__data").textContent=t,e.querySelector(".search-results__title").textContent=this.data.title,e.querySelector(".search-results__text").textContent=this.data.description,e.querySelector(".search-results__origin").textContent=this.data.source.name,this.card=e.firstElementChild,this.card}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(i,"markup",'\n  <a href="" class="link" target="_blank">\n    <div class="search-results__item">\n      <img src="" alt="Фото новости" class="search-results__photo">\n      <div class="search-results__text-container">\n        <p class="search-results__data"></p>\n        <h3 class="search-results__title"></h3>\n        <p class="search-results__text"></p>\n        <p class="search-results__origin"></p>\n      </div>\n    </div>\n  </a>');class l{constructor(e,t,r){this.section=e,this.container=t,this.newsCardFill=r,this.counter=0}addCard(e){const t=this.newsCardFill(e);this.container.append(t),this.section.style.display="flex"}render(e){const t=e.slice(this.counter,this.counter+3);return console.log(t),t.forEach(e=>this.addCard(e)),this.counter=this.counter+3}}class c{constructor(e){!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"checkInputValidity",()=>this.input.validity.valid?(this.input.setCustomValidity(""),this.input.reportValidity(),!0):(this.input.setCustomValidity("Нужно ввести ключевое слово"),this.input.reportValidity(),!1)),this.input=e}}var u=r(0);!function(){const e=document.forms.search,t=e.elements.search__input,r=document.querySelector(".preloader"),s=document.querySelector(".not-found-section"),n=document.querySelector(".search-results__container"),a=document.querySelector(".search-results"),d=document.querySelector(".search-results__button"),h=document.querySelector(".error-section"),y=document.querySelector(".search-field__button"),f=new c(t),p=new o(h),g=new u.a,m=new l(a,n,(function(e){return new i(e).create()}));e.addEventListener("submit",e=>{if(e.preventDefault(),s.style.display="none",h.style.display="none",f.checkInputValidity(),f.checkInputValidity()){localStorage.setItem("searchedWord",t.value),n.innerHTML="";!function(e){document.querySelector(".preloader").style.display="flex",a.style.display="none",t.setAttribute("disabled","true"),y.setAttribute("disabled","true"),p.getNews(e).then(e=>{"0"===e.articles.length?(s.style.display="flex",r.style.display="none",t.removeAttribute("disabled"),y.removeAttribute("disabled")):(g.saveNewsToLS(e),r.style.display="none")}).then(()=>{m.render(Array.from(g.getNewsFromLS().articles)),t.removeAttribute("disabled"),y.removeAttribute("disabled"),t.setCustomValidity(""),t.reportValidity()}).catch(e=>{console.log(e),h.style.display="flex",r.style.display="none",y.removeAttribute("disabled")})}(localStorage.getItem("searchedWord"))}else console.log("что-то пошло не так")}),d.addEventListener("click",()=>m.render(Array.from(g.getNewsFromLS().articles)))}()}]);